
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../inference/">
      
      
        <link rel="next" href="../memory_interface/">
      
      
      <link rel="icon" href="../../../assets/CElogo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>Memory Ordering - ScaleNPU Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../../css/print-site.css">
    
      <link rel="stylesheet" href="../../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#memory-ordering-unit" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ScaleNPU Documentation" class="md-header__button md-logo" aria-label="ScaleNPU Documentation" data-md-component="logo">
      
  <img src="../../../assets/CElogo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ScaleNPU Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Memory Ordering
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/OpenCEHardware/ScaleNPU" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    OpenCEHardware/ScaleNPU
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../revisions/" class="md-tabs__link">
          
  
  ScaleNPU

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ScaleNPU Documentation" class="md-nav__button md-logo" aria-label="ScaleNPU Documentation" data-md-component="logo">
      
  <img src="../../../assets/CElogo.png" alt="logo">

    </a>
    ScaleNPU Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/OpenCEHardware/ScaleNPU" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    OpenCEHardware/ScaleNPU
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ScaleNPU
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ScaleNPU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../revisions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Revisions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Document Conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diagram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diagrams
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protocols/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protocols
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../registers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clock Domains
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reset Domains
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interrupts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interrupts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../arbitration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arbitration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../synthesis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synthesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../verification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_16" checked>
        
          
          <label class="md-nav__link" for="__nav_2_16" id="__nav_2_16_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Microarchitecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_16_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_16">
            <span class="md-nav__icon md-icon"></span>
            Microarchitecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../preamble/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preamble
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MAC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fifo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fifo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gatekeeper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gatekeeper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../systolic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systolic Array
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mm_unit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix Multiplication Unit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../accumulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accumulator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Memory Ordering
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Memory Ordering
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Description">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-and-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      Overview and Responsibilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-descriptions" class="md-nav__link">
    <span class="md-ellipsis">
      State Descriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-signal-assignments" class="md-nav__link">
    <span class="md-ellipsis">
      Control Signal Assignments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-data-and-gatekeeper-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Output Data and Gatekeeper Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-table" class="md-nav__link">
    <span class="md-ellipsis">
      I/O Table
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I/O Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#input-signals" class="md-nav__link">
    <span class="md-ellipsis">
      Input Signals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-signals" class="md-nav__link">
    <span class="md-ellipsis">
      Output Signals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-machine-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      State Machine Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-files" class="md-nav__link">
    <span class="md-ellipsis">
      Related Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-comments" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Comments
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Inteface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../executive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Executive
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                


    <a href="../../../assets/Hardware Documentation Template.pdf" title="Generate pdf" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-9.5 8.5c0 .8-.7 1.5-1.5 1.5H7v2H5.5V9H8c.8 0 1.5.7 1.5 1.5zm5 2c0 .8-.7 1.5-1.5 1.5h-2.5V9H13c.8 0 1.5.7 1.5 1.5zm4-3H17v1h1.5V13H17v2h-1.5V9h3zm-6.5 0h1v3h-1zm-5 0h1v1H7z"/></svg>
    </a>



                  

  
  


<h1 id="memory-ordering-unit">Memory Ordering Unit</h1>
<h2 id="description">Description</h2>
<p>The <code>hs_npu_memory_ordering</code> module is a control unit responsible for orchestrating data flow between memory and the inference unit in the NPU. It uses a state machine to manage loading of input matrices, weights, biases, and sums, as well as saving output data back to memory. Key functionalities include handling memory requests, controlling data read and write operations, and setting up FIFOs for input, weight, and output buffers. This module also supports reusing weights and inputs, applying biases, and shifting values for activation functions. Its execution can be configured through control signals, with outputs aligned for the systolic array dimensions, ensuring data preparation for matrix multiplication and inference tasks.</p>
<h3 id="overview-and-responsibilities">Overview and Responsibilities</h3>
<ol>
<li>
<p><strong>State Machine</strong>: </p>
<ul>
<li>The module transitions between states like <code>IDLE</code>, <code>LOADING_WEIGHTS</code>, <code>LOADING_INPUTS</code>, <code>LOADING_BIAS</code>, <code>LOADING_SUMS</code>, <code>READY_TO_COMPUTE</code>, and <code>SAVING</code>. Each state has specific responsibilities, and transitions occur based on conditions such as memory validity signals and reuse flags.</li>
</ul>
</li>
<li>
<p><strong>Data Loading and Memory Requests</strong>: </p>
<ul>
<li>During the loading phases, this module issues memory requests and loads data (weights, inputs, bias, sums) from memory or previous inference results based on the configuration. It uses <code>BURST_SIZE</code> to control the amount of data per transfer.</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>As discussed earlier, changing the default value of <code>BURST_SIZE</code> might cause errors.</p>
</div>
</li>
<li>
<p><strong>Computation Control</strong>: </p>
<ul>
<li>In the <code>READY_TO_COMPUTE</code> state, the module controls gates (<code>start_input_gatekeeper</code> and <code>start_output_gatekeeper</code>) and enables the computation within the inference unit, coordinating the input and output flow through the gatekeepers.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This is absolutely central to the NPU, as this timing is very sentitive, one cycle too early or too late will produce incomplete or incorrect results. </p>
</div>
</li>
<li>
<p><strong>Saving Results</strong>: </p>
<ul>
<li>After computation, in the <code>SAVING</code> state, it can write results back to memory if <code>save_outputs_in</code> is asserted. It uses memory write signals (<code>mem_write_valid_o</code> and <code>memory_data_out</code>) to save computed outputs sequentially.</li>
</ul>
</li>
<li>
<p><strong>FIFO Control</strong>:</p>
<ul>
<li>The module manages FIFO flushing and readiness signals to synchronize data flow within the NPU, particularly for input, weight, and output FIFOs.</li>
</ul>
</li>
</ol>
<h3 id="state-descriptions">State Descriptions</h3>
<ul>
<li>
<p><strong>IDLE</strong>: Initializes parameters and waits for a valid execution signal (<code>exec_valid_i</code>). When received, captures layer parameters, resets relevant counters, and transitions to <code>LOADING_WEIGHTS</code>.</p>
</li>
<li>
<p><strong>LOADING_WEIGHTS</strong>: Loads weights from memory into <code>output_weights</code> until the required rows are loaded or <code>reuse_weights</code> is set. When done, it transitions to <code>LOADING_INPUTS</code>.</p>
</li>
<li>
<p><strong>LOADING_INPUTS</strong>: Loads input data from memory (or reuses prior inputs if <code>reuse_inputs</code> is set). After loading, it transitions to <code>LOADING_BIAS</code>.</p>
</li>
<li>
<p><strong>LOADING_BIAS</strong>: If <code>use_bias</code> is asserted, loads bias values into <code>bias</code>. When completed, moves to <code>LOADING_SUMS</code>.</p>
</li>
<li>
<p><strong>LOADING_SUMS</strong>: Similar to the bias load, but for sums if <code>use_sum</code> is asserted. After loading, transitions to <code>READY_TO_COMPUTE</code>.</p>
</li>
<li>
<p><strong>READY_TO_COMPUTE</strong>: Activates input and output gatekeepers for controlled data flow into the inference unit. Sets up the module for computation based on <code>computation_cycles</code> and then transitions to <code>SAVING</code> to store results.</p>
</li>
<li>
<p><strong>SAVING</strong>: Saves the output data to memory if <code>save_outputs_in</code> is asserted. Once all data is saved, resets for the next cycle and goes back to <code>IDLE</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Note that the unit assumes that all the data is concurrently stored in memory, in a specific order!</p>
</div>
</li>
</ul>
<h3 id="control-signal-assignments">Control Signal Assignments</h3>
<ul>
<li><strong>exec_ready_o</strong>: Indicates readiness for a new operation when in <code>IDLE</code>.</li>
<li><strong>mem_read_ready_o</strong> and <strong>mem_write_valid_o</strong>: Control memory read/write based on the state and internal flags.</li>
<li><strong>flush_input_fifos</strong>, <strong>flush_weight_fifos</strong>, and <strong>flush_output_fifos</strong>: Manage FIFO flushing in relevant states.</li>
</ul>
<h3 id="output-data-and-gatekeeper-configuration">Output Data and Gatekeeper Configuration</h3>
<ul>
<li><code>output_weights</code>, <code>output_inputs</code>, <code>output_bias</code>, and <code>output_sums</code> hold data that will be transferred to inference and accumulation units.</li>
<li><code>start_input_gatekeeper</code>, <code>start_output_gatekeeper</code>, and <code>enable_cycles_gatekeeper</code> configure gatekeepers, allowing smooth data flow within the processing unit.</li>
</ul>
<h2 id="io-table">I/O Table</h2>
<h3 id="input-signals">Input Signals</h3>
<table>
<thead>
<tr>
<th>Input Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clk</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Clock signal for synchronization.</td>
</tr>
<tr>
<td><code>rst_n</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Active-low reset signal.</td>
</tr>
<tr>
<td><code>exec_valid_i</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Indicates that an execution request is valid.</td>
</tr>
<tr>
<td><code>mem_valid_i</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Indicates that a memory read or write request is valid.</td>
</tr>
<tr>
<td><code>mem_ready_i</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Memory interface ready signal for data transfers.</td>
</tr>
<tr>
<td><code>memory_data_in</code></td>
<td>Input</td>
<td><code>uword [BURST_SIZE]</code></td>
<td>Data matrix values read from memory.</td>
</tr>
<tr>
<td><code>num_input_rows_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Number of rows in the input matrix.</td>
</tr>
<tr>
<td><code>num_input_columns_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Number of columns in the input matrix.</td>
</tr>
<tr>
<td><code>num_weight_rows_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Number of rows in the weight matrix.</td>
</tr>
<tr>
<td><code>num_weight_columns_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Number of columns in the weight matrix.</td>
</tr>
<tr>
<td><code>reuse_inputs_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Control signal to reuse inputs across computations.</td>
</tr>
<tr>
<td><code>reuse_weights_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Control signal to reuse weights across computations.</td>
</tr>
<tr>
<td><code>save_outputs_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Control signal to save outputs after computation.</td>
</tr>
<tr>
<td><code>use_bias_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Enables bias addition in the computation.</td>
</tr>
<tr>
<td><code>use_sum_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Enables sum accumulation in the computation.</td>
</tr>
<tr>
<td><code>shift_amount_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Specifies the amount to shift results after computation.</td>
</tr>
<tr>
<td><code>activation_select_in</code></td>
<td>Input</td>
<td><code>logic</code></td>
<td>Selects the activation function to apply to results.</td>
</tr>
<tr>
<td><code>base_address_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Base address for memory accesses.</td>
</tr>
<tr>
<td><code>result_address_in</code></td>
<td>Input</td>
<td><code>uword</code></td>
<td>Address to store the computation results.</td>
</tr>
<tr>
<td><code>inference_result</code></td>
<td>Input</td>
<td><code>logic [INPUT_DATA_WIDTH-1:0] [SIZE]</code></td>
<td>Final output from inference.</td>
</tr>
</tbody>
</table>
<h3 id="output-signals">Output Signals</h3>
<table>
<thead>
<tr>
<th>Output Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>exec_ready_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates readiness to accept a new execution command.</td>
</tr>
<tr>
<td><code>finished</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates that the current operation has completed.</td>
</tr>
<tr>
<td><code>mem_read_ready_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates readiness for memory read operations.</td>
</tr>
<tr>
<td><code>mem_write_valid_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates that a memory write operation is valid.</td>
</tr>
<tr>
<td><code>mem_invalidate</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signals to invalidate read data.</td>
</tr>
<tr>
<td><code>memory_data_out</code></td>
<td>Output</td>
<td><code>uword [BURST_SIZE]</code></td>
<td>Data matrix values written to memory.</td>
</tr>
<tr>
<td><code>request_address</code></td>
<td>Output</td>
<td><code>uword</code></td>
<td>Address for requesting data from memory.</td>
</tr>
<tr>
<td><code>flush_input_fifos</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to flush the input FIFOs.</td>
</tr>
<tr>
<td><code>input_fifo_valid_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates that data in input FIFO is valid.</td>
</tr>
<tr>
<td><code>flush_weight_fifos</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to flush the weight FIFOs.</td>
</tr>
<tr>
<td><code>weight_fifo_valid_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates that data in weight FIFO is valid.</td>
</tr>
<tr>
<td><code>flush_output_fifos</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to flush the output FIFOs.</td>
</tr>
<tr>
<td><code>output_fifo_ready_o</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Indicates that the output FIFO is ready.</td>
</tr>
<tr>
<td><code>output_fifo_reread</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to reread data from the output FIFO.</td>
</tr>
<tr>
<td><code>bias_enable</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Enable signal for bias in computation.</td>
</tr>
<tr>
<td><code>weight_enable</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Enable signal for weight data in computation.</td>
</tr>
<tr>
<td><code>start_input_gatekeeper</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to start the input gatekeeper.</td>
</tr>
<tr>
<td><code>start_output_gatekeeper</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Signal to start the output gatekeeper.</td>
</tr>
<tr>
<td><code>enable_cycles_gatekeeper</code></td>
<td>Output</td>
<td><code>uword</code></td>
<td>Number of cycles for enabling the gatekeeper.</td>
</tr>
<tr>
<td><code>activation_select_out</code></td>
<td>Output</td>
<td><code>logic</code></td>
<td>Output activation function selection.</td>
</tr>
<tr>
<td><code>shift_amount_out</code></td>
<td>Output</td>
<td><code>uword</code></td>
<td>Output shift amount for the computation result.</td>
</tr>
<tr>
<td><code>output_weights</code></td>
<td>Output</td>
<td><code>logic [INPUT_DATA_WIDTH-1:0] [SIZE]</code></td>
<td>Output weight matrix values.</td>
</tr>
<tr>
<td><code>output_inputs</code></td>
<td>Output</td>
<td><code>logic [INPUT_DATA_WIDTH-1:0] [SIZE]</code></td>
<td>Output input matrix values.</td>
</tr>
<tr>
<td><code>output_bias</code></td>
<td>Output</td>
<td><code>logic [OUTPUT_DATA_WIDTH-1:0] [SIZE]</code></td>
<td>Output bias values.</td>
</tr>
<tr>
<td><code>output_sums</code></td>
<td>Output</td>
<td><code>logic [OUTPUT_DATA_WIDTH-1:0] [SIZE]</code></td>
<td>Output sums balues.</td>
</tr>
</tbody>
</table>
<h2 id="state-machine-diagram">State Machine Diagram</h2>
<p>This diagram presents a basic overview of the state machine and its transitions.</p>
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]-->
<!DOCTYPE html>
<html>
<head>
<title>memory_ordering_sm</title>
<meta charset="utf-8"/>
</head>
<body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers tags lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; agent=\&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36\&quot; version=\&quot;24.8.3\&quot;&gt;\n  &lt;diagram name=\&quot;Page-1\&quot; id=\&quot;YSxjl38nwRG9tiZU8W-t\&quot;&gt;\n    &lt;mxGraphModel dx=\&quot;3718\&quot; dy=\&quot;1476\&quot; grid=\&quot;1\&quot; gridSize=\&quot;10\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;850\&quot; pageHeight=\&quot;1100\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;\n      &lt;root&gt;\n        &lt;mxCell id=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot; /&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-50\&quot; value=\&quot;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fillColor=default;gradientColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-170\&quot; y=\&quot;270\&quot; width=\&quot;1720\&quot; height=\&quot;460\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-1\&quot; value=\&quot;IDLE\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-18\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;F0UxMVk_AQHw3IrQtTwU-6\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-7\&quot;&gt;\n          &lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-19\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-18\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-0.0507\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;10\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-6\&quot; value=\&quot;LOADING&amp;lt;div&amp;gt;WEIGHTS&amp;lt;/div&amp;gt;\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;210\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-7\&quot; value=\&quot;LOADING&amp;lt;div&amp;gt;INPUTS&amp;lt;/div&amp;gt;\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;440\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-8\&quot; value=\&quot;LOADING BIAS\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;670\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-9\&quot; value=\&quot;LOADING&amp;amp;nbsp;&amp;lt;div&amp;gt;SUMS&amp;lt;/div&amp;gt;\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;900\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-10\&quot; value=\&quot;SAVING\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;1340\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-11\&quot; value=\&quot;READY&amp;lt;div&amp;gt;TO&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;COMPUTE&amp;lt;/div&amp;gt;\&quot; style=\&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry x=\&quot;1130\&quot; y=\&quot;340\&quot; width=\&quot;80\&quot; height=\&quot;80\&quot; as=\&quot;geometry\&quot; /&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-12\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;F0UxMVk_AQHw3IrQtTwU-1\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-6\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;70\&quot; y=\&quot;380\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;120\&quot; y=\&quot;330\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;110\&quot; y=\&quot;280\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-13\&quot; value=\&quot;Executive Unit Valid\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-12\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.027\&quot; y=\&quot;-24\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;-15\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-14\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;F0UxMVk_AQHw3IrQtTwU-6\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-6\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;220\&quot; y=\&quot;460\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;270\&quot; y=\&quot;410\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;220\&quot; y=\&quot;460\&quot; /&gt;\n              &lt;mxPoint x=\&quot;278\&quot; y=\&quot;460\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-15\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-14\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-16\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-7\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;250\&quot; y=\&quot;340\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;500\&quot; y=\&quot;340\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;360\&quot; y=\&quot;280\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-17\&quot; value=\&quot;Reuse Weights\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-16\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.027\&quot; y=\&quot;-24\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;-9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-20\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;520\&quot; y=\&quot;380\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;670\&quot; y=\&quot;380\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-21\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-20\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-0.0507\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;10\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-22\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;452\&quot; y=\&quot;408\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;508\&quot; y=\&quot;408\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;450\&quot; y=\&quot;460\&quot; /&gt;\n              &lt;mxPoint x=\&quot;508\&quot; y=\&quot;460\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-23\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-22\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-24\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.973;entryY=0.365;entryDx=0;entryDy=0;entryPerimeter=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-7\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;480\&quot; y=\&quot;340\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;710\&quot; y=\&quot;340\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;560\&quot; y=\&quot;290\&quot; /&gt;\n              &lt;mxPoint x=\&quot;560\&quot; y=\&quot;330\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-25\&quot; value=\&quot;Reuse Inputs\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-24\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.027\&quot; y=\&quot;-24\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;24\&quot; y=\&quot;-4\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-26\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;683\&quot; y=\&quot;410\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;739\&quot; y=\&quot;410\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;681\&quot; y=\&quot;462\&quot; /&gt;\n              &lt;mxPoint x=\&quot;739\&quot; y=\&quot;462\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-27\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-26\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-28\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;750\&quot; y=\&quot;380\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;900\&quot; y=\&quot;380\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-29\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-28\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-0.0507\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;10\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-30\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;710\&quot; y=\&quot;340\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;940\&quot; y=\&quot;340\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;820\&quot; y=\&quot;280\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-31\&quot; value=\&quot;!Use Bias\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-30\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.027\&quot; y=\&quot;-24\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;-9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-32\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;913\&quot; y=\&quot;410\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;969\&quot; y=\&quot;410\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;911\&quot; y=\&quot;462\&quot; /&gt;\n              &lt;mxPoint x=\&quot;969\&quot; y=\&quot;462\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-33\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-32\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-36\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;980\&quot; y=\&quot;380\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;1130\&quot; y=\&quot;380\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-37\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-36\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-0.0507\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;10\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-38\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;940\&quot; y=\&quot;340\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;1170\&quot; y=\&quot;340\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;1050\&quot; y=\&quot;280\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-39\&quot; value=\&quot;!Use Sums\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-38\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.027\&quot; y=\&quot;-24\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;-9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-40\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1143\&quot; y=\&quot;410\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;1199\&quot; y=\&quot;410\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;1141\&quot; y=\&quot;462\&quot; /&gt;\n              &lt;mxPoint x=\&quot;1199\&quot; y=\&quot;462\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-41\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-40\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-42\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1210\&quot; y=\&quot;379.76\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;1340\&quot; y=\&quot;380\&quot; as=\&quot;targetPoint\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-43\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-42\&quot;&gt;\n          &lt;mxGeometry x=\&quot;-0.0507\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint y=\&quot;10\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-44\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1353\&quot; y=\&quot;410\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;1409\&quot; y=\&quot;410\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;1351\&quot; y=\&quot;462\&quot; /&gt;\n              &lt;mxPoint x=\&quot;1409\&quot; y=\&quot;462\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-45\&quot; value=\&quot;!Counter Finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-44\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;1\&quot; y=\&quot;9\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-46\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;F0UxMVk_AQHw3IrQtTwU-10\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;870\&quot; y=\&quot;260\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;920\&quot; y=\&quot;210\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;1550\&quot; y=\&quot;370\&quot; /&gt;\n              &lt;mxPoint x=\&quot;1530\&quot; y=\&quot;680\&quot; /&gt;\n              &lt;mxPoint x=\&quot;290\&quot; y=\&quot;720\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-47\&quot; value=\&quot;Counter finished\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-46\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.1261\&quot; y=\&quot;-20\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;100\&quot; y=\&quot;35\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-48\&quot; value=\&quot;\&quot; style=\&quot;curved=1;endArrow=classic;html=1;rounded=0;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;F0UxMVk_AQHw3IrQtTwU-1\&quot; target=\&quot;F0UxMVk_AQHw3IrQtTwU-1\&quot;&gt;\n          &lt;mxGeometry width=\&quot;50\&quot; height=\&quot;50\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;-118\&quot; y=\&quot;360\&quot; as=\&quot;sourcePoint\&quot; /&gt;\n            &lt;mxPoint x=\&quot;-62\&quot; y=\&quot;360\&quot; as=\&quot;targetPoint\&quot; /&gt;\n            &lt;Array as=\&quot;points\&quot;&gt;\n              &lt;mxPoint x=\&quot;-40\&quot; y=\&quot;340\&quot; /&gt;\n              &lt;mxPoint x=\&quot;-62\&quot; y=\&quot;412\&quot; /&gt;\n            &lt;/Array&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n        &lt;mxCell id=\&quot;F0UxMVk_AQHw3IrQtTwU-49\&quot; value=\&quot;!Executive Unit Valid\&quot; style=\&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];\&quot; vertex=\&quot;1\&quot; connectable=\&quot;0\&quot; parent=\&quot;F0UxMVk_AQHw3IrQtTwU-48\&quot;&gt;\n          &lt;mxGeometry x=\&quot;0.0076\&quot; y=\&quot;-1\&quot; relative=\&quot;1\&quot; as=\&quot;geometry\&quot;&gt;\n            &lt;mxPoint x=\&quot;-55\&quot; y=\&quot;-7\&quot; as=\&quot;offset\&quot; /&gt;\n          &lt;/mxGeometry&gt;\n        &lt;/mxCell&gt;\n      &lt;/root&gt;\n    &lt;/mxGraphModel&gt;\n  &lt;/diagram&gt;\n&lt;/mxfile&gt;\n&quot;}"></div>
<script type="text/javascript" src="https://viewer.diagrams.net/js/viewer-static.min.js"></script>
</body>
</html>

<h2 id="related-files">Related Files</h2>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/OpenCEHardware/ScaleNPU/blob/main/rtl/hs_npu/hs_npu_memory_ordering.sv">hs_npu_memory_ordering</a></td>
<td>Top</td>
</tr>
</tbody>
</table>
<h2 id="additional-comments">Additional Comments</h2>
<p>As discussed earlier, refactoring this module would resolve most of the current inflexibilities of the ScaleNPU in terms of sizes and parameters. Up until now, following the uarch section order, this is the only module that hardcodes specific sizes and parameters into the logic.</p>
<p>It should also be noted that this module is quite complex, having to manage both the AXI sizes, bursts, and synchronization, along with the MM unit requirements and special timing. While this flexibility would provide a nice boost in performance, using the default values (whose correct functionality has been validated) is still significantly faster than using the ScaleCore-V for inference. The current pain point is the software interface, as the programmer must directly interact with the CSRs. A software driver would be the most beneficial addition to the ScaleNPU at this time.</p>












                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../inference/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Inference">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Inference
              </div>
            </div>
          </a>
        
        
          
          <a href="../memory_interface/" class="md-footer__link md-footer__link--next" aria-label="Next: Memory Inteface">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Memory Inteface
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/OpenCEHardware"  target="_blank" rel="noopener">OpenCEHardware</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.annotation", "content.code.copy", "header.autohide", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>